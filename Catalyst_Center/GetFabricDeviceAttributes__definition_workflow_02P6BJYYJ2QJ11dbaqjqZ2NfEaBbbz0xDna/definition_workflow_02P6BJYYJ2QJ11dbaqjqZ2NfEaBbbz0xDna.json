{
  "workflow": {
    "unique_name": "definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna",
    "name": "Get Fabric Device Attributes",
    "title": "Get Fabric Device Attributes",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Device Attributes Summary",
          "type": "datatype.string",
          "description": "Contains the Device attributes summary as follows:\n\n{\n    \"nwDeviceName\":\"\",\n    \"nwDeviceType\":\"\",\n    \"serialNumber\":\"\",\n    \"managementIpAddr\",\"\",\n    \"communicationState\":\"\",\n    \"complinaceStatus\":\"\",\n    \"provisdioningStatus\":\"\"\n}",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "json"
        },
        "unique_name": "variable_workflow_02P6BJYZ2P5V226Lqsy0tXiW4RGxNYsTTLz",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "--",
          "scope": "local",
          "name": "provisioningStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02P6BJYZ2OSGY0Dak0toqQiWMC6Y1wZgJZL",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "Network Device Id",
          "type": "datatype.string",
          "description": "Network Device Id assigned in the Catalyst Center Device Inventory",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": ""
        },
        "unique_name": "variable_workflow_02P6BJYZ2PKSR3CFKRYxlfcxxv9iZUrcydZ",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "delete_workflow_instance": false,
      "description": "Returns a summary of all attributes of a fabric device",
      "display_name": "Get Fabric Device Attributes",
      "runtime_user": {
        "target_default": true
      },
      "target": {
        "target_type": "catalystcenter.endpoint",
        "specify_on_workflow_start": true
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_02P6BJZ1AKLKK4JI36adzOUaPyxcu8d5btr",
        "name": "Group",
        "title": "NetworkDevice Attributes",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "NetworkDevice Attributes",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02P6BJZ2RWZO33wBeLHL4AKf6ebfY6cArn5",
            "name": "Generic Catalyst Center API Request",
            "title": "GetApiV1DeviceDetail",
            "type": "catalystcenter.invoke_api",
            "base_type": "activity",
            "properties": {
              "_endpoint": "/dna/intent/api/v1/device-detail?searchBy=$workflow.definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna.input.variable_workflow_02P6BJYZ2PKSR3CFKRYxlfcxxv9iZUrcydZ$\u0026identifier=uuid",
              "_headers": [
                {
                  "name": "Accept",
                  "value": "application/json"
                }
              ],
              "_method": "GET",
              "action_timeout": 180,
              "continue_on_failure": false,
              "display_name": "GetApiV1DeviceDetail",
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "use_workflow_target": true
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02P6BJZ3QKHES0RT8LHbJlY2CyMekzOh5tB",
            "name": "JSONPath Query",
            "title": "Get Device Attributes",
            "type": "corejava.jsonpathquery",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": true,
              "display_name": "Get Device Attributes",
              "input_json": "$activity.definition_activity_02P6BJZ2RWZO33wBeLHL4AKf6ebfY6cArn5.output.raw_body$",
              "jsonpath_queries": [
                {
                  "jsonpath_query": "$.response.nwDeviceName",
                  "jsonpath_query_name": "nwDeviceName",
                  "jsonpath_query_type": "string",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                },
                {
                  "jsonpath_query": "$.response.managementIpAddr",
                  "jsonpath_query_name": "managementIpAddr",
                  "jsonpath_query_type": "string",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                },
                {
                  "jsonpath_query": "$.response.serialNumber",
                  "jsonpath_query_name": "serialNumber",
                  "jsonpath_query_type": "string",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                },
                {
                  "jsonpath_query": "$.response.communicationState",
                  "jsonpath_query_name": "communicationState",
                  "jsonpath_query_type": "string",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                },
                {
                  "jsonpath_query": "$.response.nwDeviceType",
                  "jsonpath_query_name": "nwDeviceType",
                  "jsonpath_query_type": "string",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                }
              ],
              "skip_execution": false,
              "skip_path": false
            },
            "object_type": "definition_activity"
          }
        ]
      },
      {
        "unique_name": "definition_activity_02P6BJZ4VNSXV6DhzjZWOoDxbMS2DD4hMZZ",
        "name": "Group",
        "title": "Compliance Status",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Compliance Status",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02P6BJZ69IB062uowlGSWCXDTBwrUtjhrUM",
            "name": "Generic Catalyst Center API Request",
            "title": "GetApiV1Compliance",
            "type": "catalystcenter.invoke_api",
            "base_type": "activity",
            "properties": {
              "_endpoint": "/dna/intent/api/v1/compliance/$workflow.definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna.input.variable_workflow_02P6BJYZ2PKSR3CFKRYxlfcxxv9iZUrcydZ$",
              "_headers": [
                {
                  "name": "Accept",
                  "value": "application/json"
                }
              ],
              "_method": "GET",
              "action_timeout": 180,
              "continue_on_failure": false,
              "display_name": "GetApiV1Compliance",
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "use_workflow_target": true
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02P6BJZ764B6T6R6c1EIwg9NMiHRoC4x0oI",
            "name": "JSONPath Query",
            "title": "Get Compliance Status",
            "type": "corejava.jsonpathquery",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": true,
              "display_name": "Get Compliance Status",
              "input_json": "$activity.definition_activity_02P6BJZ69IB062uowlGSWCXDTBwrUtjhrUM.output.raw_body$",
              "jsonpath_queries": [
                {
                  "jsonpath_query": "$.response.complianceStatus",
                  "jsonpath_query_name": "complianceStatus",
                  "jsonpath_query_type": "string"
                }
              ],
              "skip_execution": false,
              "skip_path": false
            },
            "object_type": "definition_activity"
          }
        ]
      },
      {
        "unique_name": "definition_activity_02P6BJZ8AP6OK0rwJ0YEJsMZOyKXyauHoeQ",
        "name": "Group",
        "title": "Provisioning Status",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Provisioning Status",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02P6BJZ9PM5DY5haGAHr2agM1xcxZwpNNUL",
            "name": "Generic Catalyst Center API Request",
            "title": "GetApiV1SdaProvisionDevices",
            "type": "catalystcenter.invoke_api",
            "base_type": "activity",
            "properties": {
              "_endpoint": "/dna/intent/api/v1/sda/provisionDevices?networkDeviceId=$workflow.definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna.input.variable_workflow_02P6BJYZ2PKSR3CFKRYxlfcxxv9iZUrcydZ$",
              "_headers": [
                {
                  "name": "Accept",
                  "value": "application/json"
                }
              ],
              "_method": "GET",
              "action_timeout": 180,
              "continue_on_failure": false,
              "display_name": "GetApiV1SdaProvisionDevices",
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "use_workflow_target": true
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02P6BJZANOYGH3A2VgqA51uorzsGnIVcPq7",
            "name": "JSONPath Query",
            "title": "Get Provisioning Status",
            "type": "corejava.jsonpathquery",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": true,
              "display_name": "Get Provisioning Status",
              "input_json": "$activity.definition_activity_02P6BJZ9PM5DY5haGAHr2agM1xcxZwpNNUL.output.raw_body$",
              "jsonpath_queries": [
                {
                  "jsonpath_query": "$.response.length()",
                  "jsonpath_query_name": "provisioningCount",
                  "jsonpath_query_type": "integer",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                }
              ],
              "skip_execution": false,
              "skip_path": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02P6BJZBSWROI1awRp9jEjendE4KgZvX4n7",
            "name": "Condition Block",
            "title": "Condition Block",
            "type": "logic.if_else",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Condition Block",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "blocks": [
              {
                "unique_name": "definition_activity_02P6BJZCPZ7PO492vlFbSSXAUE2T39e9rpT",
                "name": "Condition Branch",
                "title": "provisioningCount \u003e 0",
                "type": "logic.condition_block",
                "base_type": "activity",
                "properties": {
                  "condition": {
                    "left_operand": "$activity.definition_activity_02P6BJZANOYGH3A2VgqA51uorzsGnIVcPq7.output.jsonpath_queries.provisioningCount$",
                    "operator": "gt",
                    "right_operand": 0
                  },
                  "continue_on_failure": false,
                  "display_name": "provisioningCount \u003e 0",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02P6BJZE3JJLD6mhWztQMxlBBdH28fbYyaE",
                    "name": "Set Variables",
                    "title": "Set Provisioning Status",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "display_name": "Set Provisioning Status",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna.local.variable_workflow_02P6BJYZ2OSGY0Dak0toqQiWMC6Y1wZgJZL$",
                          "variable_value_new": "Success"
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_02P6BJZFYUUI02PjsZNwgiSoMmJoURIRtxR",
        "name": "Set Variables",
        "title": "Write Output",
        "type": "core.set_multiple_variables",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Write Output",
          "skip_execution": false,
          "variables_to_update": [
            {
              "variable_to_update": "$workflow.definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna.output.variable_workflow_02P6BJYZ2P5V226Lqsy0tXiW4RGxNYsTTLz$",
              "variable_value_new": "{\n    \"nwDeviceName\":\"$activity.definition_activity_02P6BJZ3QKHES0RT8LHbJlY2CyMekzOh5tB.output.jsonpath_queries.nwDeviceName$\",\n    \"nwDeviceType\":\"$activity.definition_activity_02P6BJZ3QKHES0RT8LHbJlY2CyMekzOh5tB.output.jsonpath_queries.nwDeviceType$\",\n    \"serialNumber\":\"$activity.definition_activity_02P6BJZ3QKHES0RT8LHbJlY2CyMekzOh5tB.output.jsonpath_queries.serialNumber$\",\n    \"managementIpAddr\":\"$activity.definition_activity_02P6BJZ3QKHES0RT8LHbJlY2CyMekzOh5tB.output.jsonpath_queries.managementIpAddr$\",\n    \"communicationState\":\"$activity.definition_activity_02P6BJZ3QKHES0RT8LHbJlY2CyMekzOh5tB.output.jsonpath_queries.communicationState$\",\n    \"complianceStatus\":\"$activity.definition_activity_02P6BJZ764B6T6R6c1EIwg9NMiHRoC4x0oI.output.jsonpath_queries.complianceStatus$\",\n    \"provisioningStatus\":\"$workflow.definition_workflow_02P6BJYYJ2QJ11dbaqjqZ2NfEaBbbz0xDna.local.variable_workflow_02P6BJYZ2OSGY0Dak0toqQiWMC6Y1wZgJZL$\"\n}"
            }
          ]
        },
        "object_type": "definition_activity"
      }
    ],
    "categories": [
      "category_02L1BDZTDUZYK4mC1JH8QdR6Y6CbDgTWMSM",
      "category_02MM9C85JUWUR5TgdOD9C63Cu8yXeqotSxk"
    ]
  },
  "categories": {
    "category_02L1BDZTDUZYK4mC1JH8QdR6Y6CbDgTWMSM": {
      "unique_name": "category_02L1BDZTDUZYK4mC1JH8QdR6Y6CbDgTWMSM",
      "name": "Cisco Catalyst Center - Devices",
      "title": "Cisco Catalyst Center - Devices",
      "type": "basic.category",
      "base_type": "category",
      "description": "Actiosn to manage device lifecycle",
      "category_type": "system",
      "object_type": "category"
    },
    "category_02MM9C85JUWUR5TgdOD9C63Cu8yXeqotSxk": {
      "unique_name": "category_02MM9C85JUWUR5TgdOD9C63Cu8yXeqotSxk",
      "name": "Cisco Catalyst Center - SDA",
      "title": "Cisco Catalyst Center - SDA",
      "type": "basic.category",
      "base_type": "category",
      "description": "Groups all actions for SD-Access Fabric management",
      "category_type": "system",
      "object_type": "category"
    }
  }
}