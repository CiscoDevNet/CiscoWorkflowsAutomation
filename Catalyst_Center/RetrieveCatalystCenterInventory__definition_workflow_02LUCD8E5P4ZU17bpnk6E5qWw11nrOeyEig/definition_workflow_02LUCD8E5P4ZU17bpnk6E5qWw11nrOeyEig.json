{
  "workflow": {
    "unique_name": "definition_workflow_02LUCD8E5P4ZU17bpnk6E5qWw11nrOeyEig",
    "name": "Retrieve Catalyst Center Inventory",
    "title": "Retrieve Catalyst Center Inventory",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Device Inventory",
          "type": "datatype.string",
          "description": "List of Devices in inventory",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "json"
        },
        "unique_name": "variable_workflow_02LUCEERXKT1S5nTte1bsWWdxzEzKVvwrs5",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "automation_rules": {
        "type": [
          "webhook.rule_event"
        ]
      },
      "delete_workflow_instance": false,
      "description": "Retrieves Catalyst Center Inventory, automates retrieving inventory of devices under management",
      "display_name": "Retrieve Catalyst Center Inventory",
      "runtime_user": {
        "override_target_runtime_user": false,
        "specify_on_workflow_start": false,
        "target_default": true
      },
      "target": {
        "target_type": "catalystcenter.endpoint",
        "specify_on_workflow_start": true
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_02NSTCHPO5HM26JfA4DkxWyN8h1HQatZqoc",
        "name": "Generic Catalyst Center API Request",
        "title": "GetApiV1NetworkDevice",
        "type": "catalystcenter.invoke_api",
        "base_type": "activity",
        "properties": {
          "_endpoint": "dna/intent/api/v1/network-device",
          "_method": "GET",
          "action_timeout": 180,
          "continue_on_failure": false,
          "description": "Generic Catalyst Center API Request",
          "display_name": "GetApiV1NetworkDevice",
          "runtime_user": {
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "use_workflow_target": true
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_02NSTDKA25MJD5RGhXdrUVzc6KZ0RdFCBnv",
        "name": "JSONPath Query",
        "title": "Parse Response",
        "type": "corejava.jsonpathquery",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "continue_on_failure": false,
          "description": "JSONPath Query to get value in JSON",
          "display_name": "Parse Response",
          "input_json": "$activity.definition_activity_02NSTCHPO5HM26JfA4DkxWyN8h1HQatZqoc.output.raw_body$",
          "jsonpath_queries": [
            {
              "jsonpath_query": "$.response",
              "jsonpath_query_name": "deviceInventory",
              "jsonpath_query_type": "string"
            }
          ],
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_02LUCDVWBDHW03gQn6PSBNtik7Ok5mWWE9X",
        "name": "Set Variables",
        "title": "Set Output.DeviceInventory",
        "type": "core.set_multiple_variables",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Set Output.DeviceInventory",
          "skip_execution": false,
          "variables_to_update": [
            {
              "variable_to_update": "$workflow.definition_workflow_02LUCD8E5P4ZU17bpnk6E5qWw11nrOeyEig.output.variable_workflow_02LUCEERXKT1S5nTte1bsWWdxzEzKVvwrs5$",
              "variable_value_new": "$activity.definition_activity_02NSTDKA25MJD5RGhXdrUVzc6KZ0RdFCBnv.output.jsonpath_queries.deviceInventory$"
            }
          ]
        },
        "object_type": "definition_activity"
      }
    ],
    "categories": [
      "category_02L1BDZTDUZYK4mC1JH8QdR6Y6CbDgTWMSM"
    ],
    "template_type": "template_workflow.workflow_with_automation_rule"
  },
  "categories": {
    "category_02L1BDZTDUZYK4mC1JH8QdR6Y6CbDgTWMSM": {
      "unique_name": "category_02L1BDZTDUZYK4mC1JH8QdR6Y6CbDgTWMSM",
      "name": "Cisco Catalyst Center - Devices",
      "title": "Cisco Catalyst Center - Devices",
      "type": "basic.category",
      "base_type": "category",
      "description": "Actiosn to manage device lifecycle",
      "category_type": "system",
      "object_type": "category"
    }
  },
  "rules": {
    "ruleevent_02LUBECYMSZDF4cpgK3OMe7TFgyPckFpaXV": {
      "name": "Dispatch Collection Cat Center Inventory Rule",
      "title": "Dispatch Collection Cat Center Inventory Rule",
      "description": "Dispatches \"Retrieve Catalyst Center Inventory\"",
      "type": "webhook.rule_event",
      "rule_type": "rule_event",
      "base_type": "rule",
      "object_type": "ruleevent",
      "version": "1.0.0",
      "properties": {
        "description": "Dispatches \"Retrieve Catalyst Center Inventory\"",
        "disabled": false,
        "display_name": "Dispatch Collection Cat Center Inventory Rule",
        "group_by": false,
        "rule_type": "rule_event",
        "title": "Dispatch Collection Cat Center Inventory Rule",
        "webhook_id": "webhook_02LUB9G1DIVD70Vhftd5kJL121PBC3Sr5Y8",
        "workflows_config": [
          {
            "disabled": false,
            "ref_id": "definition_workflow_02LUCD8E5P4ZU17bpnk6E5qWw11nrOeyEig",
            "status": {
              "state": "started-polling",
              "prev_state": "started-polling",
              "error_msg": ""
            }
          }
        ]
      },
      "disabled": false,
      "unique_name": "ruleevent_02LUBECYMSZDF4cpgK3OMe7TFgyPckFpaXV"
    }
  },
  "webhooks": {
    "webhook_02LUB9G1DIVD70Vhftd5kJL121PBC3Sr5Y8": {
      "name": "Catalyst Center Inventory Web Hook Dispatcher",
      "title": "Catalyst Center Inventory Web Hook Dispatcher",
      "type": "generic.webhook",
      "base_type": "webhook",
      "object_type": "webhook",
      "version": "1.0.0",
      "properties": {
        "description": "Webhook call back to dispatch  \"Get Catalyst Center Inventory\"",
        "display_name": "Catalyst Center Inventory Web Hook Dispatcher",
        "request_content_type": "application/json"
      },
      "unique_name": "webhook_02LUB9G1DIVD70Vhftd5kJL121PBC3Sr5Y8"
    }
  }
}